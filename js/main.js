function checkHeaderPosition(){$(window).scrollTop()>0||0!==header.offset().top?header.addClass("float"):header.removeClass("float")}function mobileMenuToggle(){burgerBTN.toggleClass("active"),mobileMenu.toggleClass("active"),header.hasClass("float")?header.removeClass("float"):checkHeaderPosition(),body.toggleClass("lock")}function checkTopBtnPosition(){let e=$("#pricing"),t=$("#scroll-top"),s=$(window).height(),i=e.offset().top;$(window).scrollTop()+s>=i?t.addClass("visible"):t.removeClass("visible")}function lazyLoadBackground(){$(".lazy-bg").each((function(){let e=$(this);if(e.is(":visible")&&e.offset().top<$(window).scrollTop()+$(window).height()){let t=e.data("bg");t&&(e.css({"background-image":`url(${t})`,opacity:0}).animate({opacity:1},400),e.removeClass("lazy-bg"))}}))}$(document).ready((function(){body=$("body"),burgerBTN=$("#burger"),mobileMenu=$("#mobile-menu"),mobileMenuLink=$(".mobile__menu-nav a"),header=$("#header"),checkHeaderPosition(),checkTopBtnPosition(),lazyLoadBackground(),localStorage.clear(),n(),burgerBTN.add(mobileMenuLink).on("click",mobileMenuToggle),$("a[href^='#']").on("click",(function(e){e.preventDefault();let t=$(this).attr("href").substring(1),s=$("[data-id='"+t+"']").filter(":visible");s.length&&$("html, body").scrollTop(s.offset().top-100)})),$("#scroll-top").on("click",(function(e){e.preventDefault(),$("html, body").scrollTop(0)})),$("#header-app-btn").click((function(e){e.stopPropagation(),$(this).toggleClass("active"),$(".header__menu-btn-container").toggleClass("active"),$(".header__menu-btn-img").toggleClass("active")})),$(document).click((function(e){$("#header-app-btn").is(e.target)||0!==$("#header-app-btn").has(e.target).length||$(".header__menu-btn-container").is(e.target)||0!==$(".header__menu-btn-container").has(e.target).length||($("#header-app-btn").removeClass("active"),$(".header__menu-btn-container").removeClass("active"),$(".header__menu-btn-img").removeClass("active"))})),setInterval((function(){let e=$("#floating-chat");e.is(":hover")||$(".popup-chat__window").hasClass("active")||(e.addClass("shake"),setTimeout((function(){e.removeClass("shake")}),500))}),4e3),$("#scroll-top").on("click",(function(){$(this).removeClass("visible")})),$(".attendance-card--js").click((function(){$(this).toggleClass("checked")}));let e=$(".testimonials__testimonial-wrapper"),t=$(".testimonials__slide"),s=0;setInterval((function(){let t=$(".testimonials__testimonial").first(),s=t.next(),i=s.attr("data-slide");$("[data-dot]").removeClass("active"),t.animate({marginLeft:"-100%",opacity:0},1e3,(function(){$(this).remove().css({marginLeft:"0",opacity:1}),e.append($(this)),$('[data-dot="'+i+'"]').addClass("active")})),s.css({opacity:0}).animate({opacity:1},1e3)}),5e3),setInterval((function(){let e=(s+1)%t.length;t.eq(s).removeClass("active"),t.eq(e).addClass("active"),s=e}),5e3);let i=[{color:"#BC4E1F",size:"18vw"},{color:"#115266",size:"20vw"},{color:"#AC37C2",size:"19vw"},{color:"#925A18",size:"35vw"},{color:"#193C37",size:"26vw"},{color:"#420B3E",size:"14vw"},{color:"#0B7871",size:"30vw"},{color:"#962213",size:"27vw"},{color:"#115266",size:"24vw"}];class a{constructor(e,t){this.$el=$("<div>").addClass("blob").appendTo(e),this.size=t.size,this.color=t.color,this.initialX=o(0,e.width()-parseFloat(this.size)),this.initialY=o(0,e.height()-parseFloat(this.size)),this.$el.css({position:"absolute",width:this.size,height:this.size,borderRadius:"50%",background:this.color,top:`${this.initialY}px`,left:`${this.initialX}px`,opacity:.7,zIndex:t.zIndex||1}),this.vx=o(.8,2.4)*(Math.random()>.5?1:-1),this.vy=o(.8,2.4)*(Math.random()>.5?1:-1),this.x=this.initialX,this.y=this.initialY}update(){this.x+=this.vx,this.y+=this.vy,(this.x>=this.$el.parent().width()-parseFloat(this.size)||this.x<=0)&&(this.vx*=-1),(this.y>=this.$el.parent().height()-parseFloat(this.size)||this.y<=0)&&(this.vy*=-1)}move(){this.$el.css("transform",`translate(${this.x-this.initialX}px, ${this.y-this.initialY}px)`)}}function o(e,t){return Math.random()*(t-e)+e}function l(){let e=localStorage.getItem("selected_time"),t=e+" - "+function(e,t){let s=e.split(" "),[i,a]=s[0].split(":"),o=s[1];i=parseInt(i),a=parseInt(a),"PM"===o&&12!==i?i+=12:"AM"===o&&12===i&&(i=0);let l=new Date;return l.setHours(i),l.setMinutes(a),l.setMinutes(l.getMinutes()+t),function(e){let t=e.getHours(),s=e.getMinutes(),i=t>=12?"PM":"AM";return t%=12,t=t||12,s=s<10?"0"+s:s,t+":"+s+" "+i}(l)}(e,30);$("#result-time").text(t);let s=localStorage.getItem("selected_day");const i={Sun:"Sunday",Mon:"Monday",Tue:"Tuesday",Wed:"Wednesday",Thu:"Thursday",Fri:"Friday",Sat:"Saturday"};let a=function(e){let t=e.split(", "),s=t[0],a=t[1].split(" "),o=a[0],l=a[1],n=(new Date).getFullYear();return{fullDay:i[s],formattedDate:`${l} ${o} ${n}`}}(s);$("#result-day").text(a.fullDay),$("#result-date").text(a.formattedDate)}function n(){$(".popup__time-item").removeClass("chosen"),$(".flatpickr-day").removeClass("selected"),$("#selected-title").text("Select Day"),$("#next-btn").removeClass("time").addClass("disabled").prop("disabled",!0),$("#back-btn").removeClass("visible"),$(".popup__time").is(":visible")||$("#selected-day").hide()}function d(e){$(e).find("input, textarea").val(""),$(e).find('input[type="checkbox"], input[type="radio"]').prop("checked",!1),$(e).find("select").prop("selectedIndex",0),$(e).find("input, textarea, .popup__field-wrapper").removeClass("alert clear field--error")}function r(){$("#popup").hide(),$("body").removeClass("lock"),$(".popup__form").removeClass("visible"),$("#send-btn").removeClass("visible btn--filled").addClass("disabled").prop("disabled",!0),$("#d-send-btn").removeClass("visible btn--filled").addClass("disabled").prop("disabled",!0),$("#d-back-btn").hide(),$("#selected-data").hide(),$("#selected-title").show(),$("#next-btn").removeClass("time btn--filled").addClass("disabled").prop("disabled",!0).removeAttr("style"),$("#d-next-btn").removeClass("time btn--filled").addClass("disabled").prop("disabled",!0).removeAttr("style"),$(".popup__content-subtitle").show(),d("form"),$(".custom-month").removeClass("open"),$(".custom-month-list").removeClass("visible"),$(".flatpickr-prev-month").removeAttr("style"),$(".flatpickr-next-month").removeAttr("style"),$("#flatpickr-css").remove(),localStorage.clear(),n()}function c(){$(".flatpickr-calendar:visible").length>0&&$(".popup__time:visible").length>0&&$(".flatpickr-day.selected").length>0&&$(".popup__time-item.chosen").length>0?$("#d-next-btn").removeClass("disabled").addClass("btn--filled").prop("disabled",!1):$("#d-next-btn").addClass("disabled").removeClass("btn--filled").prop("disabled",!0)}!function(){const e=$("#animated-bg"),t=i.map((t=>new a(e,t)));requestAnimationFrame((function e(){requestAnimationFrame(e),t.forEach((e=>{e.update(),e.move()}))}))}(),$("#floating-chat").on("click",(function(){$("#whatsapp-popup").toggleClass("active"),$("body").addClass("lock-chat"),function(){let e=new Date,t=e.getHours(),s=e.getMinutes(),i=t>=12?"pm":"am";t=t%12||12,s=s<10?"0"+s:s;let a=`${t}:${s} ${i}`;$("#whatsapp-timestamp").text(a)}(),""!=$("#whatsapp-textarea").val().trim()&&$(".popup-chat__link").addClass("visible"),setTimeout((function(){$("#whatsapp-typing").fadeOut(400)}),600),setTimeout((function(){$(".popup-chat__msg").addClass("visible")}),1e3),setTimeout((function(){$(".popup-chat__msg-block").addClass("visible").fadeIn(600),function(){if(!localStorage.getItem("audio")){let e=new Audio("./img/chat/sound_incoming_msg.mp3");e.play(),e.onended=function(){localStorage.setItem("audio","1")}}}()}),1900)})),$(".popup-chat__link").on("click",(function(e){e.preventDefault();const t=$("#whatsapp-textarea").val().trim();if(""!=t){const e=encodeURIComponent(t),s=$(this).attr("data-link")+"?text="+e;window.open(s,"_blank"),$("#whatsapp-textarea").val("").removeAttr("style").trigger("input"),$("#whatsapp-popup").removeClass("active"),$(".popup-chat__link").removeClass("visible floating"),$("body").removeClass("lock-chat")}})),$("#whatsapp-textarea").on("focus",(function(){$(".popup-chat__link").addClass("visible")})),$("#whatsapp-textarea").on("input",(function(){""===$(this).val().trim()?(this.style.height="50px",$(".popup-chat__link").removeClass("visible floating")):(this.style.height="auto",this.style.height=this.scrollHeight+"px",$(".popup-chat__link").addClass("floating visible"))})),$("#whatsapp-close").on("click",(function(){$("#whatsapp-popup").removeClass("active"),$(".popup-chat__link").removeClass("visible"),$("body").removeClass("lock-chat")})),$(document).on("click",(function(e){$(e.target).closest("#whatsapp-popup, #floating-chat").length||($("#whatsapp-popup").removeClass("active"),$(".popup-chat__link").removeClass("visible"),$("body").removeClass("lock-chat"))})),$(".meet--js").click((function(){$("body").addClass("lock"),function(){$("#popup").css("display","flex"),$(".popup__calendar").show(),$(".popup__calendar-wrapper").css("opacity",0).show().animate({opacity:1},500);let e=document.createElement("link");e.rel="stylesheet",e.href="./css/flatpickr.css",e.id="flatpickr-css",document.head.appendChild(e);let t=document.createElement("script");t.src="./js/flatpickr.js",t.id="flatpickr-js",t.onload=function(){let e=new Date,t=(new Date).fp_incr(14);flatpickr("#calendar",{inline:!0,minDate:e,maxDate:t,dateFormat:"Y-m-d",disableMobile:!0,showMonths:1,locale:{weekdays:{shorthand:["S","M","T","W","T","F","S"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},prevArrow:"<img style='transform: rotate(180deg);' width='24' height='24' src='./img/icons/icon_chevron_right.svg' alt='Next Month'>",nextArrow:"<img width='24' height='24' src='./img/icons/icon_chevron_right.svg' alt='Next Month'>",appendTo:document.getElementById("calendar"),disable:[function(e){return 0===e.getDay()||6===e.getDay()}],onReady:function(e,t,a){setTimeout((()=>o(a)),10),i(a),s(a),$("#calendar .flatpickr-calendar").prependTo(".popup__calendar-wrapper"),n(),$("#success").removeAttr("style")},onMonthChange:function(e,t,i){setTimeout((()=>o(i)),10),a(i),s(i),$(".flatpickr-day.selected").removeClass("selected"),$("#next-btn").removeClass("btn--filled").addClass("disabled").prop("disabled",!0),$(".popup__time-item").removeClass("chosen")},onOpen:function(e,t,s){setTimeout((()=>o(s)),10),s.clear(),n(),$("#success").removeAttr("style")},onChange:function(e,t,s){if($(".flatpickr-day.today").removeClass("today"),$("#next-btn").removeClass("disabled").addClass("btn--filled").prop("disabled",!1),e.length>0){let t=e[0].toLocaleDateString("en-US",{weekday:"short",month:"short",day:"2-digit",year:"numeric"});localStorage.setItem("selected_day",t)}c()}});function s(e){let t=e.config.minDate.getMonth(),s=e.config.maxDate.getMonth(),i=e.l10n.months.longhand.map((e=>e.substring(0,3)));$(".custom-month-item").each((function(){let e=$(this).text(),a=i.indexOf(e);a>=t&&a<=s&&$(this).removeClass("disabled")}))}function i(e){const t=e.calendarContainer.querySelector(".flatpickr-month");if(!t)return;const s=document.createElement("span");s.classList.add("custom-month"),t.prepend(s),a(e)}function a(e){const t=e.calendarContainer.querySelector(".custom-month");if(!t)return;const s=e.l10n.months.longhand[e.currentMonth],i=e.currentYear;t.textContent=`${s} ${i}`}function o(s){let i=s.monthElements[0];if(i){let a=i.children,o=e.getMonth(),l=t.getMonth();(new Date).getFullYear();for(let e=0;e<a.length;e++)a[e].style.opacity="1",a[e].style.pointerEvents="auto",a[e].style.color="#000";for(let e=0;e<a.length;e++)(e<o||e>l)&&(a[e].style.opacity="0.5",a[e].style.pointerEvents="none");i.addEventListener("change",(function(){let e=parseInt(i.value);(e<o||e>l)&&(s.currentMonth=o,s.redraw())}))}}},document.head.appendChild(t)}()})),$(".popup__time-item").click((function(){$(this).hasClass("chosen")?($(this).removeClass("chosen"),localStorage.setItem("selected_time","")):($(".popup__time-item").removeClass("chosen"),$(this).addClass("chosen"),localStorage.setItem("selected_time",$(this).text())),$("#back-btn").toggleClass("visible"),$("#next-btn").toggleClass("time disabled btn--filled").prop("disabled",(function(e,t){return!t}))})),$("#next-btn").on("click",(function(){$(".popup__time-item").hasClass("chosen")?($(".popup__content-subtitle").hide(),$("#selected-day").hide(),$("#selected-title").hide(),$("#time").hide(),$("#next-btn").hide(),$("#selected-data").show(),$(".popup__form").addClass("visible"),$("#send-btn").addClass("visible"),$("#back-btn").addClass("visible"),l()):($(".flatpickr-calendar").hide(),$(".popup__time").show(),$(".popup__time-item").removeClass("chosen"),$(".popup__time").is(":visible")?($("#next-btn").addClass("time disabled").removeClass("btn--filled").prop("disabled",!0),$("#back-btn").addClass("visible"),$("#selected-day").text(localStorage.getItem("selected_day")).show(),$("#selected-title").text("Select Time")):$("#selected-day").hide())})),$("#d-next-btn").click((function(){$(this).hide(),$("#selected-data").show(),$("#d-selected-title").hide(),$("#calendar").hide(),$(".popup__form").addClass("visible"),$("#d-back-btn").show(),$("#d-send-btn").addClass("visible"),l()})),$("#back-btn").on("click",(function(){d("form"),$(".popup__form").hasClass("visible")?($(".popup__form").removeClass("visible"),$("#selected-data").hide(),$("#send-btn").removeClass("visible"),$("#next-btn").addClass("time disabled").prop("disabled",!0).show(),$(".popup__content-subtitle").show(),$("#selected-day").show(),$("#time").show(),$("#selected-title").text("Select Time").show(),$(".popup__time-item").removeClass("chosen")):($(".flatpickr-calendar").show(),$(".popup__time").hide(),$("#back-btn").removeClass("visible"),$("#next-btn").removeClass("time").prop("disabled",!1),$("#selected-title").text("Select Day"),localStorage.clear(),$("#selected-day").hide(),$(".flatpickr-day").removeClass("selected"))})),$("#d-back-btn").click((function(){$(this).hide(),$("#d-next-btn").show(),$("#selected-data").hide(),$("#d-selected-title").show(),$("#calendar").show(),$(".popup__form").removeClass("visible"),$("#d-send-btn").removeClass("visible")})),$("input[required], textarea[required], select[required]").on("input change",(function(){let e=!0,t=$(".popup__field-wrapper.alert").length>0;$("input[required], textarea[required], select[required]").each((function(){if(""===$(this).val().trim())return e=!1,!1}));let s=!e||t;$("#send-btn").toggleClass("disabled",s),$("#send-btn").toggleClass("btn--filled",!s),$("#send-btn").prop("disabled",s),$("#d-send-btn").toggleClass("disabled",s),$("#d-send-btn").toggleClass("btn--filled",!s),$("#d-send-btn").prop("disabled",s)})),$("#close-popup").click((function(){r()})),$(document).on("click",".flatpickr-day, .popup__time-item",c),$(document).on("click",".flatpickr-calendar, .popup__time",c),$(document).on("click",".custom-month",(function(){$(this).toggleClass("open"),$(".custom-month-list").toggleClass("visible"),$(".flatpickr-prev-month").toggle(),$(".flatpickr-next-month").toggle()})),$(document).on("click",".custom-month-item:not(.disabled)",(function(){let e=$(this).text(),t=$("#calendar").get(0)._flatpickr;if(!t)return;let s=t.l10n.months.longhand.findIndex((t=>t.startsWith(e)));-1!==s&&t.changeMonth(s-t.currentMonth),$(".custom-month").toggleClass("open"),$(".custom-month-list").toggleClass("visible"),$(".flatpickr-prev-month").toggle(),$(".flatpickr-next-month").toggle()})),$("#success-close").click((function(){h=setTimeout((function(){$("#success").removeAttr("style")}),100),r(),$(".popup__content").show()})),$(".popup__form-field").on("input",(function(){let e=$(this).closest(".popup__field-wrapper");$(this).val().length>=3?e.addClass("clear"):e.removeClass("clear")})),$(document).on("click",".clear",(function(e){const t=$(this);if(t.hasClass("alert"))return;const s=this.getBoundingClientRect();e.clientX>s.right-35&&t.find(".popup__form-field").val("").trigger("input")}));const p=document.querySelectorAll("#send-btn, #d-send-btn");let h;p.forEach((e=>{e.addEventListener("click",(async e=>{e.preventDefault();const t=document.querySelector(".popup__form");let s=!0,i=null;const a=t.querySelectorAll('input[type="email"]');if(t.querySelectorAll("input, textarea, select").forEach((e=>{const t=e.closest(".popup__field-wrapper");e.classList.remove("field--error"),t?.classList.remove("alert"),e.hasAttribute("required")&&!e.value.trim()?(s=!1,e.classList.add("field--error"),$("#d-send-btn").prop("disabled",!0),$("#send-btn").prop("disabled",!0),$("#d-send-btn").toggleClass("btn--filled disabled"),$("#send-btn").toggleClass("btn--filled disabled"),t?.classList.add("alert"),i||(i=e)):e.pattern&&!new RegExp(e.pattern).test(e.value)&&(s=!1,$("#d-send-btn").prop("disabled",!0),$("#send-btn").prop("disabled",!0),$("#d-send-btn").toggleClass("btn--filled disabled"),$("#send-btn").toggleClass("btn--filled disabled"),e.classList.add("field--error"),t?.classList.add("alert"),i||(i=e))})),a.forEach((e=>{const t=e.closest(".popup__field-wrapper");e.classList.remove("field--error"),t?.classList.remove("alert");/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.value)||(s=!1,e.classList.add("field--error"),t?.classList.add("alert"),$("#d-send-btn").prop("disabled",!0),$("#send-btn").prop("disabled",!0),$("#d-send-btn").toggleClass("btn--filled disabled"),$("#send-btn").toggleClass("btn--filled disabled"),i||(i=e))})),!s)return void(i&&i.focus());let o="",l="";try{const e=await fetch("https://geolocation-db.com/json/");o=(await e.json()).country_code,l=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){console.error("Error fetching location data:",e)}let n=await async function(){let e=localStorage.getItem("selected_day"),t=localStorage.getItem("selected_time");if(!e||!t)return null;let s=`${e} ${t} UTC`,i=new Date(s);return isNaN(i.getTime())?(console.error("Invalid date format:",s),null):Math.floor(i.getTime()/1e3)}();const d=new FormData(t),r={...Object.fromEntries(d.entries()),target_date:n||"",country_code:o||"",timezone:l||"",hashtoken:"7BRltAlHPDGAXfQAf0hdIFpRG9aVBlC9"};console.log("Form data to be sent:",r);try{const e=await fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),s=await e.json();console.log("API Response:",s),t.reset(),p.forEach((e=>{e.disabled=!0})),$(".popup__content").hide(),$("#success").show()}catch(e){console.error("Error submitting form:",e)}}))})),document.querySelectorAll(".popup__form-field").forEach((e=>{e.addEventListener("input",(function(){const e=this.closest(".popup__field-wrapper");let t=!0;if(this.hasAttribute("required")&&!this.value.trim())t=!1;else if(this.pattern&&!new RegExp(this.pattern).test(this.value))t=!1;else if("email"===this.type){/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.value)||(t=!1)}t&&(this.classList.remove("field--error"),e?.classList.remove("alert"))}))})),$(window).resize((function(){$("#popup").attr("style")&&r()})),$(window).on("scroll resize",lazyLoadBackground),$(window).on("scroll",(function(){checkHeaderPosition(),$("#scroll-top").removeClass("visible"),clearTimeout(h),h=setTimeout((function(){checkTopBtnPosition()}),200)}))}));